<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DVD-Style Bouncing Logo</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #000;
      overflow: hidden;
      width: 100%;
      height: 100%;
    }
    canvas {
      display: block;
      width: 100vw;
      height: 100vh;
      outline: none;
    }
  </style>
</head>
<body>
<canvas id="screensaver"></canvas>

<script>
  const canvas = document.getElementById('screensaver');
  const ctx = canvas.getContext('2d');

  // Make sure something is focusable so key events are reliable
  canvas.setAttribute('tabindex', '0');
  canvas.focus();

  let dpr = window.devicePixelRatio || 1;

  function resize() {
    dpr = window.devicePixelRatio || 1;
    canvas.width = window.innerWidth * dpr;
    canvas.height = window.innerHeight * dpr;
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0); // draw in CSS pixels
  }

  window.addEventListener('resize', resize);
  resize();

  // Load the bouncing image
  const logoImg = new Image();
  logoImg.src = 'xai.svg'; // must sit next to this HTML file

  // Logo state (position in CSS pixels)
  const logo = {
    w: 140,
    h: 140,
    x: 100,
    y: 100,
    vx: 100, // px/sec (2x slower)
    vy: 80   // px/sec (2x slower)
  };

  let lastTime = null;

  function step(timestamp) {
    if (lastTime === null) lastTime = timestamp;
    const dt = (timestamp - lastTime) / 1000; // seconds
    lastTime = timestamp;

    const width = window.innerWidth;
    const height = window.innerHeight;

    // Update position
    logo.x += logo.vx * dt;
    logo.y += logo.vy * dt;

    // Bounce off edges
    if (logo.x <= 0) {
      logo.x = 0;
      logo.vx *= -1;
    } else if (logo.x + logo.w >= width) {
      logo.x = width - logo.w;
      logo.vx *= -1;
    }

    if (logo.y <= 0) {
      logo.y = 0;
      logo.vy *= -1;
    } else if (logo.y + logo.h >= height) {
      logo.y = height - logo.h;
      logo.vy *= -1;
    }

    // Trail effect: draw a translucent black rectangle instead of full clear
    ctx.fillStyle = 'rgba(0, 0, 0, 0.20)';
    ctx.fillRect(0, 0, width, height);

    // Slight glow for the logo
    ctx.save();
    ctx.shadowBlur = 20;
    ctx.shadowColor = 'rgba(255,255,255,0.5)';

    if (logoImg.complete && logoImg.naturalWidth > 0) {
      ctx.drawImage(logoImg, logo.x, logo.y, logo.w, logo.h);
    } else {
      // Fallback block if the SVG isn't loaded yet
      ctx.fillStyle = '#00e0ff';
      ctx.fillRect(logo.x, logo.y, logo.w, logo.h);
    }

    ctx.restore();

    requestAnimationFrame(step);
  }

  // Initial full clear to solid black
  ctx.fillStyle = '#000';
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  requestAnimationFrame(step);

  // Fullscreen helpers (cross-browser-ish)
  function enterFullscreen() {
    const elem = document.documentElement;
    if (elem.requestFullscreen) return elem.requestFullscreen();
    if (elem.webkitRequestFullscreen) return elem.webkitRequestFullscreen();
    if (elem.mozRequestFullScreen) return elem.mozRequestFullScreen();
    if (elem.msRequestFullscreen) return elem.msRequestFullscreen();
  }

  function exitFullscreen() {
    if (document.exitFullscreen) return document.exitFullscreen();
    if (document.webkitExitFullscreen) return document.webkitExitFullscreen();
    if (document.mozCancelFullScreen) return document.mozCancelFullScreen();
    if (document.msExitFullscreen) return document.msExitFullscreen();
  }

  function isFullscreen() {
    return (
      document.fullscreenElement ||
      document.webkitFullscreenElement ||
      document.mozFullScreenElement ||
      document.msFullscreenElement
    );
  }

  // Keep canvas size correct when fullscreen changes
  document.addEventListener('fullscreenchange', resize);
  document.addEventListener('webkitfullscreenchange', resize);
  document.addEventListener('mozfullscreenchange', resize);
  document.addEventListener('MSFullscreenChange', resize);

  // Press "f" to toggle fullscreen
  window.addEventListener('keydown', (e) => {
    if (!e.key) return;
    const key = e.key.toLowerCase();
    if (key === 'f') {
      e.preventDefault();
      if (!isFullscreen()) {
        enterFullscreen()?.catch?.(() => {});
      } else {
        exitFullscreen()?.catch?.(() => {});
      }
    }
  });

  // If focus is lost (e.g. clicking), re-focus canvas so keys still hit
  document.addEventListener('click', () => {
    canvas.focus();
  });
</script>
</body>
</html>
